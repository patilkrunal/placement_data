if(document.location.origin=="http://localhost"){var ajax_url="http://localhost/firstwordpress/wp-content/plugins/lexcis-mock-test/ajax/custom-ajax.php";}if(document.location.origin=="https://prepinstaranking.kinsta.com"){var ajax_url="https://prepinstaranking.kinsta.com/wp-content/plugins/lexcis-mock-test/ajax/custom-ajax.php";}if(document.location.origin=="https://prepinsta.com"){var ajax_url="https://prepinsta.com/wp-content/plugins/lexcis-mock-test/ajax/custom-ajax.php";}if(document.location.origin=="http://35.154.9.161"){var ajax_url="http://35.154.9.161/wp-content/plugins/lexcis-mock-test/ajax/custom-ajax.php";}jQuery(document).ready(function(){checkUserMockTestCount();jQuery('.ls-next').click(function(){var given_quiz=jQuery(".given_quiz").attr("given_quiz");var given_quiz_array=given_quiz.split(',');jQuery("#snackbar-msg").html("");jQuery("#snackbar-msg").text("");var next=jQuery(this).closest(".qst_box").next().attr("quiz_id");var currrent=jQuery(this).attr("quiz_id");var time_type=jQuery(".time_type").val();if(currrent!=next&&time_type=="total_time"){jQuery("#panel_"+currrent+" .accordion-toggle").attr("data-toggle","collapse");jQuery("#panel_"+currrent+" .accordion-toggle").addClass("collapsed");jQuery("#collapse"+currrent).removeClass("in");jQuery("#panel_"+next+" .accordion-toggle").attr("data-toggle","collapse");jQuery("#panel_"+next+" .accordion-toggle").removeClass("collapsed");jQuery("#collapse"+next).addClass("in");}if((given_quiz_array.indexOf(next)!==-1||currrent!=next)&&time_type=="invidual_time"){if(currrent!=next){var title=jQuery(".question-menus #panel_"+currrent+" .panel-title a").text();jQuery("#snackbar-msg").html("<span style='color:red;'>Please submit current "+title+".</span>");}else{jQuery("#snackbar-msg").html("<span style='color:red;'>You have compelted that section.</span>");}toast_mock();}else{jQuery(this).closest(".qst_box").hide().next().show();jQuery('.qstn_menu_list').removeClass('active_question');var next_qst_id=jQuery(this).closest(".qst_box").next().attr("qst_id");jQuery(".question-menus-li-div [qstn_id='"+next_qst_id+"']").addClass('active_question');}});jQuery('.ls-pre').click(function(){jQuery("#snackbar-msg").html("");jQuery("#snackbar-msg").text("");var given_quiz=jQuery(".given_quiz").attr("given_quiz");var given_quiz_array=given_quiz.split(',');var pre=jQuery(this).closest(".qst_box").prev().attr("quiz_id");var currrent=jQuery(this).attr("quiz_id");var time_type=jQuery(".time_type").val();if(currrent!=pre&&time_type=="total_time"){jQuery("#panel_"+currrent+" .accordion-toggle").attr("data-toggle","collapse");jQuery("#panel_"+currrent+" .accordion-toggle").addClass("collapsed");jQuery("#collapse"+currrent).removeClass("in");jQuery("#panel_"+pre+" .accordion-toggle").attr("data-toggle","collapse");jQuery("#panel_"+pre+" .accordion-toggle").removeClass("collapsed");jQuery("#panel_"+pre+" .panel-collapse").removeAttr("style");jQuery("#collapse"+pre).addClass("in");}if((given_quiz_array.indexOf(pre)!==-1||currrent!=pre)&&time_type=="invidual_time"){if(currrent!=pre){var title=jQuery(".question-menus #panel_"+currrent+" .panel-title a:first-child").text();jQuery("#snackbar-msg").html("<span style='color:red;'>Please submit current "+title+".</span>");}else{jQuery("#snackbar-msg").html("<span style='color:red;'>You have compelted that section.</span>");}toast_mock();}else{jQuery(this).closest(".qst_box").hide().prev().show();jQuery('.qstn_menu_list').removeClass('active_question');var pre_qst_id=jQuery(this).closest(".qst_box").prev().attr("qst_id");jQuery(".question-menus-li-div [qstn_id='"+pre_qst_id+"']").addClass('active_question');}});jQuery('.ls-nav-btn-div').on("click",".ls-mark",function(){var qst_id=jQuery(this).data("qst_id");jQuery("[qstn_id='"+qst_id+"']").addClass("marked");var marked_count=jQuery(".qst_handle.marked span").html();var new_count=parseInt(marked_count)+parseInt(1);jQuery(".qst_handle.marked span").html(new_count);jQuery(this).hide().next(".ls-unmark").show();});jQuery('.ls-nav-btn-div').on("click",".ls-unmark",function(){var qst_id=jQuery(this).data("qst_id");jQuery("[qstn_id='"+qst_id+"']").removeClass("marked");var marked_count=jQuery(".qst_handle.marked span").html();var new_count=parseInt(marked_count)-parseInt(1);jQuery(".qst_handle.marked span").html(new_count);jQuery(this).hide().prev(".ls-mark").show();});jQuery('.ls-nav-btn-div').on("click",".ls-clear",function(){var qst_id=jQuery(this).data("qst_id");jQuery(".question-menus-li-div .active_question").removeClass("answered-class");if(jQuery('input[name="option['+qst_id+']"]').is(':checked')){var answered_count=jQuery(".qst_handle.answered span").html();var new_count=parseInt(answered_count)-parseInt(1);jQuery(".qst_handle.answered span").html(new_count);var unanswered_count=jQuery(".qst_handle.unanswered span").html();var new_unanswered_count=parseInt(unanswered_count)+parseInt(1);jQuery(".qst_handle.unanswered span").html(new_unanswered_count);jQuery("[qst_id='"+qst_id+"'] .qst-options").prop("checked",false);jQuery("[qst_id='"+qst_id+"'] .overlay-options").removeClass("overlay-options");var mock_id=jQuery(this).attr("mock_id");var quiz_id=jQuery(this).attr("quiz_id");jQuery.ajax({type:"POST",url:ajax_url,data:{"action":"save_mock_selected_data_clear","question_id":qst_id,"mock_id":mock_id,"quiz_id":quiz_id},success:function(response){}});}});jQuery('.question-menus-li-div').on("click",".qstn_menu_list",function(){var qst_id=jQuery(this).attr("qstn_id");if(jQuery('[qst_id="'+qst_id+'"].qst_box').css('display')=='none'){var $this=jQuery(".questions").find('[qst_id="'+qst_id+'"].qst_box');jQuery(".qst_box").not($this).hide();}jQuery('.qstn_menu_list').removeClass('active_question');jQuery(".question-menus-li-div [qstn_id='"+qst_id+"']").addClass('active_question');$this.toggle();});});function getTimeRemaining(endtime,type){Date.prototype.toMysqlFormat=function(){return this.getUTCFullYear()+"-"+twoDigits(1+this.getUTCMonth())+"-"+twoDigits(this.getUTCDate())+" "+twoDigits(this.getUTCHours())+":"+twoDigits(this.getUTCMinutes())+":"+twoDigits(this.getUTCSeconds());};var t=Date.parse(endtime)-Date.parse(new Date());var seconds=Math.floor((t/1000)%60);var minutes=Math.floor((t/1000/60)%60);var hours=Math.floor((t/(1000*60*60))%24);var days=Math.floor(t/(1000*60*60*24));return{'total':t,'days':days,'hours':hours,'minutes':minutes,'seconds':seconds};}function twoDigits(d){if(0<=d&&d<10)return"0"+d.toString();if(-10<d&&d<0)return"-0"+(-1*d).toString();return d.toString();}function initializeClock(id,endtime_data,type,time_type,initial){if(time_type=="total_time"){endtime=endtime_data;}else{endtime=endtime_data[initial];}var timeinterval=setInterval(function(){var t=getTimeRemaining(endtime,type);if(t.days==0){t.days="00"}if(t.hours==0){t.hours="00"}if(t.minutes==0){t.minutes="00"}if(t.seconds==0){t.seconds="00"}jQuery("."+id+" ."+type+"timer-day").text(t.days);jQuery("."+id+" ."+type+"timer-hour").text(t.hours);jQuery("."+id+" ."+type+"timer-minut").text(t.minutes);jQuery("."+id+" ."+type+"timer-second").text(t.seconds);if(t.total<=0){if(time_type=="invidual_time"){var given_quiz=jQuery(".given_quiz").attr("given_quiz");if(given_quiz!=""){jQuery(".given_quiz").attr("given_quiz",given_quiz.concat(","+initial));}else{jQuery(".given_quiz").attr("given_quiz",initial);}var test_id=jQuery('.test_id').val();checkUserMockTestCount();var endtime_data_check=JSON.parse(jQuery(".time").attr("invidual_time"));if(Object.keys(endtime_data_check).length!=1&&Object.keys(endtime_data_check).length>1){if(Object.keys(endtime_data_check).length<1){jQuery(".submit_invidual_quiz").css("display","none");}else{jQuery("[quiz_id="+initial+"]").closest(".submit_invidual_quiz").hide().next().show();jQuery(".submit-div [quiz_id='"+initial+"']").click();}}else{clearInterval(timeinterval);}}else{clearInterval(timeinterval);}jQuery("."+id+" ."+type+"timer-day").text("00");jQuery("."+id+" ."+type+"timer-hour").text("00");jQuery("."+id+" ."+type+"timer-minut").text("00");jQuery("."+id+" ."+type+"timer-second").text("00");if(t.total<=0&&type=='test-'&&(Object.keys(endtime_data).length==1||time_type=="total_time"||isEmpty(endtime_data))){clearInterval(timeinterval);jQuery("."+type+"timer-day").text("00");jQuery("."+type+"timer-hour").text("00");jQuery("."+type+"timer-minut").text("00");jQuery("."+type+"timer-second").text("00");jQuery("input[name='mock_test_submit']").click();}else{}}},1000);}jQuery(document).ready(function(){jQuery('.submit-div').on("click",".submit_invidual_quiz",function(){jQuery("#snackbar-msg").html("");jQuery("#snackbar-msg").text("");var initial=jQuery(this).attr("quiz_id");var endtime_data=JSON.parse(jQuery(".time").attr("invidual_time"));var current_time=endtime_data[initial];delete endtime_data[initial];if(typeof endtime_data!="undefined"){var quiz_id=jQuery(this).closest(".submit_invidual_quiz").hide().next().attr("quiz_id");var new_endtime=endtime_data[quiz_id];jQuery("#panel_"+quiz_id+" .accordion-toggle").attr("data-toggle","collapse in");jQuery("#panel_"+quiz_id+" .accordion-toggle").removeClass("collapsed");jQuery("#collapse"+quiz_id).addClass("in");jQuery("#collapse"+quiz_id+" .qstn_menu_list:first-child").click();jQuery(".time").attr("invidual_time",JSON.stringify(endtime_data));var title=jQuery(".question-menus #panel_"+initial+" .panel-title a:first-child").text();jQuery("#snackbar-msg").html("<span>You have submitted "+title.trim()+".</span>");toast_mock();}else{clearInterval(timeinterval);}if(Object.keys(endtime_data).length==1){jQuery(".submit_invidual_quiz").css("display","none");}else{jQuery(this).closest(".submit_invidual_quiz").hide().next().show();}var test_id=jQuery('.test_id').val();jQuery.ajax({type:"POST",url:ajax_url,data:{"action":"change_quiz_result_status","quiz_id":initial,"test_id":test_id,"next_quiz_id":quiz_id,"current_time":current_time,"next_time":new_endtime},success:function(response){response_data=JSON.parse(response);if(response_data.status==1){endtime_data[quiz_id]=response_data.exam_end_time;initializeClock("test-timer",endtime_data,"test-","invidual_time",quiz_id);jQuery("#panel_"+initial+" .accordion-toggle").attr("data-toggle","");jQuery("#panel_"+initial+" .accordion-toggle").addClass("collapsed");jQuery("#collapse"+initial).removeClass("in");checkUserMockTestCount();}}});});});function isEmpty(obj){for(var key in obj){if(obj.hasOwnProperty(key))return false;}return true;}jQuery(document).ready(function(){jQuery('.start-test-div').on("click",".start-test",function(){jQuery("#snackbar-msg").html("");var test_id=jQuery(this).attr("test_id");var quize_ids=jQuery(this).attr("quize_ids");var f_name,l_name,company_id;company_id=jQuery('select[name=company_name]').val();if(jQuery(this).attr("start_type")=="show_form"){if(jQuery('input[name="f_name"]').is(':disabled')&&jQuery('input[name="l_name"]').is(':disabled')&&company_id!=""){f_name="";l_name="";company_id=jQuery('select[name=company_name]').val();}else if(jQuery('input[name="f_name"]').is(':disabled')&&jQuery('input[name=l_name]').val().trim()!=""&&company_id!=""){f_name="";l_name=jQuery('input[name="l_name"]').val();company_id=jQuery('select[name=company_name]').val();}else if(jQuery('input[name="l_name"]').is(':disabled')&&jQuery('input[name=f_name]').val().trim()!=""&&company_id!=""){f_name=jQuery('input[name="f_name"]').val();l_name="";company_id=jQuery('select[name=company_name]').val();}else{if(jQuery('input[name=f_name]').val().trim()==""||jQuery('input[name=l_name]').val().trim()==""||company_id==""){alert("Please fill complete form");return false;}else{f_name=jQuery('input[name="f_name"]').val();l_name=jQuery('input[name="l_name"]').val();company_id=jQuery('select[name=company_name]').val();}}$type="show_form";}else{$type="";}jQuery.ajax({type:"POST",url:ajax_url,data:{"action":"save_start_mock_test","test_id":test_id,"f_name":f_name,"l_name":l_name,"company_id":company_id,"type":$type,"quize_ids":quize_ids},success:function(response){var response_data=JSON.parse(response);if(response_data.status=="1"||response_data.status=="2"){jQuery(".mock-test-start-screen").addClass("ls-hide");jQuery(".mocktest-main-div").removeClass("ls-hide");jQuery(".mocktest-main-div").addClass("ls-show");var arr=quize_ids.split(",");var fst=arr.splice(0,1).join("");var rest=arr.join(",");var initial=fst;initializeClock('test-timer',JSON.parse(response_data.deadline),"test-",response_data.time_type,initial);if(response_data.time_type=="total_time"){jQuery(".time_type").val("total_time");jQuery(".for_total").css("display","block");}else{jQuery(".time_type").val("invidual_time");jQuery(".submit-div [quiz_id='"+initial+"']").css("display","block");jQuery(".time").attr("invidual_time",response_data.deadline);jQuery(".submit-div [quiz_id='"+initial+"']").css("display","block");jQuery(".for_invidual").css("display","block");}if(jQuery(".time")[0]){}else{}}else{jQuery("#snackbar-msg").html("<span style='color:red;'>Facing some issue! Please refresh the page.</span>");toast_mock();}checkUserMockTestCount();}});});});jQuery(document).ready(function(){jQuery(".options-table").on("click",".qst-options",function(){jQuery("#snackbar-msg").html("");var ans_id="";var mock_id=jQuery(this).attr("mock_id");var quiz_id=jQuery(this).attr("quiz_id");var question_id=jQuery(this).attr("question_id");var ans_id=jQuery(this).attr("ans_id");jQuery(".active_question").addClass("answered-class");jQuery("[question_id='"+question_id+"']").prop("disabled",false);var check_checked=jQuery('input[name="option['+question_id+']"]').is(':checked');if(check_checked){}else{var unanswered_count=jQuery(".qst_handle.unanswered span").html();var new_unanswered_count=parseInt(unanswered_count)-parseInt(1);jQuery(".qst_handle.unanswered span").html(new_unanswered_count);var marked_count=jQuery(".qst_handle.answered span").html();var new_count=parseInt(marked_count)+parseInt(1);jQuery(".qst_handle.answered span").html(new_count);}jQuery("#option"+ans_id).prop("checked",true);jQuery(".ls-nav-btn-div button").prop("disabled",true);jQuery(".overlay_question"+question_id).removeClass("overlay-options");jQuery(".overlay"+ans_id).addClass("overlay-options");var response_time=setTimeout(function(){if(!alert('Having some issue. So page will be loaded again.')){window.location.reload();}},3000);setTimeout(function(){clearTimeout(response_time);},4000);jQuery.ajax({type:"POST",url:ajax_url,data:{"action":"save_mock_selected_data","mock_id":mock_id,"quiz_id":quiz_id,"question_id":question_id,"ans_id":ans_id},success:function(response){clearTimeout(response_time);jQuery(".ls-nav-btn-div button").prop("disabled",false);if(response=="0"){var response_time_1=setTimeout(function(){if(!alert('Having some issue. So page will be loaded again.')){window.location.reload();}},3000);jQuery("#snackbar-msg").html("<span style='color:red;'>Facing some issue! Please refresh the page.</span>");}else if(response=="1"){if(check_checked){}else{jQuery(".qst_handle.answered span").html(new_count);var date=new Date();var hours=date.getHours();var minutes=date.getMinutes();var ampm=hours>=12?'pm':'am';hours=hours%12;hours=hours?hours:12;minutes=minutes<10?'0'+minutes:minutes;var strTime=hours+':'+minutes+' '+ampm;const monthNames=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];var current_date=date.getDate()+" "+monthNames[date.getMonth()]+", "+date.getFullYear();jQuery(".save_status span").html("Last Saved at "+strTime+" ("+current_date+")");}}else if(response=="2"){jQuery("#snackbar-msg").html("<span style='color:red;'>Time for this section is over.</span>");toast_mock();}}});});jQuery('.question-menus').on("click",".individual_time_quiz",function(){jQuery("#snackbar-msg").html("");jQuery("#snackbar-msg").html("<span style='color:red;'>You can not jump to other quiz.</span>");toast_mock();});});function toast_mock(){var x=document.getElementById("snackbar");x.className="show";setTimeout(function(){x.className=x.className.replace("show","");},3000);}function checkUserMockTestCount(){var mocktest_id=jQuery(".test_id").val();var time_type=jQuery(".time_type").val();var total_quiz=jQuery(".question-menus #accordion .panel.panel-default").length;if(jQuery(".question-menus").length>0){jQuery.ajax({type:'POST',url:ajax_url,data:{"action":"get_user_mock_test_count","test_id":mocktest_id},success:function(response){if((response!=(total_quiz-1))){if(time_type=="invidual_time"){jQuery(".mock_form_submit").hide();}else{jQuery(".mock_form_submit").show();}}else{jQuery(".mock_form_submit").show();}}});}}