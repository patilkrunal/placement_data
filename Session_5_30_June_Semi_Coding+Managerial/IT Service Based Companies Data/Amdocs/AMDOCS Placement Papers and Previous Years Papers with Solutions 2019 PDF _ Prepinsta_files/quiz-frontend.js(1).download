jQuery(document).ready(function(){var timer_var;jQuery(document).on("click",".anslabel",function(){jQuery("#snackbar-msg").html("");var questionid=jQuery(this).data("questionid");var answerid=jQuery(this).data("answerid");var correctans=jQuery("input[name='correctans']").val();var total_correct_for_accuracy=jQuery("input[name='total_correct_for_accuracy']").val();var totalquestions_for_accuracy=jQuery("input[name='totalquestions']").val();var wrongans=jQuery("input[name='wrongans']").val();var skipped=jQuery("input[name='skipped']").val();var total_answered_by_user=jQuery("input[name='total_answered_by_user']").val();var avgtime=jQuery("input[name='avgtime']").val();var total_answered_by_user=jQuery("input[name='total_answered_by_user']").val();jQuery(".notattempted-blur"+questionid+" .loading").css('display','block');var question_count=jQuery(this).data("questioncount");var for_input_question_count=parseInt(question_count-1);if(answerid=="skipped"){jQuery("input[name='skipped']").val(parseInt(skipped)+parseInt(1));jQuery("input[name='ques_ans["+for_input_question_count+"]'].skippedinput").attr("checked",true);}jQuery("input[name='active_question["+question_count+"]']").val("deactive");jQuery(".reportmaindiv").css("display","block");jQuery(".answersdivquestion"+questionid+" input[type='radio']").attr("disabled",true);jQuery(".notattempted-blur"+questionid+" .anslabel").attr("disabled",true);jQuery(this).attr("checked",true);jQuery(".tab-contentprep"+questionid).css("display","block");jQuery(".correct_prep"+questionid).css("display","block");jQuery(".default_prep"+questionid).css("display","none");jQuery(".quiz-tabs"+questionid+" li").removeClass('current');jQuery('.tab-content'+questionid+' .tab-content').removeClass('current');jQuery(".quiz-tabs"+questionid+" li:eq( 0 )").addClass('current');var questionid=jQuery(this).data("questionid");var answerid=jQuery(this).data("answerid");var quizid=jQuery("input[name='quiz_id']").val();var quiz_group_id=jQuery("input[name='quiz_group_id']").val();var section_id=jQuery("input[name='section_id']").val();var topic_id=jQuery("input[name='topic_id']").val();var sw_h=jQuery(".sw_h_"+question_count).text();var sw_m=jQuery(".sw_m_"+question_count).text();var sw_s=jQuery(".sw_s_"+question_count).text();var time_hr_to_sec=sw_h*60*60;var time_min_to_sec=sw_m*60;var total_time=parseInt(parseInt(time_hr_to_sec)+parseInt(time_min_to_sec)+parseInt(sw_s));var new_avg_time=(parseInt(parseInt(total_time)+parseInt(avgtime*total_answered_by_user))/(parseInt(parseInt(total_answered_by_user)+parseInt(1))));var pad=function(num,size){return('000'+num).slice(size*-1);},time=parseFloat(new_avg_time).toFixed(3),hours=Math.floor(time/60/60),minutes=Math.floor(time/60)%60,seconds=Math.floor(time-minutes*60);jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"save_selected_ans_data","quizid":quizid,"questionid":questionid,"quiz_group_id":quiz_group_id,"section_id":section_id,"topic_id":topic_id,"answerid":answerid,"time":total_time},success:function(response){console.log(response);if(response==1){jQuery(".notattempted-blur"+questionid+" .generate_question_graph").css("display","block");}else if(response==2){jQuery(".notattempted-blur"+questionid+" .analytics-main").css("display","block");}else{}jQuery(".loading").css("display","none");}});jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"check_correct_ans","quizid":quizid,"questionid":questionid,"answerid":answerid},success:function(response){jQuery(".answersdivquestion"+questionid+" .answer-title-progress").css("display","block");jQuery.each(JSON.parse(response),function(index,quizdata){var quesstion_data=quizdata[questionid];var successfull="";var successfull_ans_id="";var total_question="";var total_answered_correct="";var total_answered_wrong="";var total_answered_default="";var filled_danger="";var filled_success="";var filled_default="";var answered_user="";var answered_user_wrong="";var filled_success_text="";jQuery(".notattempted-blur"+questionid+" .loading").css('display','none');for(var i=0;i<quesstion_data.length;i++){var success="";if(answerid!="skipped"){total_question=parseInt(parseInt(quesstion_data[i].total_answered)+parseInt(1));}else{total_question=quesstion_data[i].total_answered;}if(quesstion_data[i].correct_ans==1){if(answerid==quesstion_data[i].ans_id&&answerid!="skipped"){total_answered_correct=parseInt(parseInt(quesstion_data[i].total_answered_by_users)+parseInt(1));jQuery(".question-main.question_id_box_"+questionid+" .help-links-div").addClass('ls-mt-correct-bottom');var accuracy=((parseInt(parseInt(total_correct_for_accuracy)+parseInt(1))/totalquestions_for_accuracy)*100).toFixed(2);jQuery("input[name='total_correct_for_accuracy']").val(parseInt(parseInt(total_correct_for_accuracy)+parseInt(1)));jQuery(".ls-accuracy").html(accuracy+"%");}else{total_answered_correct=parseInt(parseInt(quesstion_data[i].total_answered_by_users));}var filled_success=((total_answered_correct*100)/total_question).toFixed(2);jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").addClass('ls-bg-success');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .answer").addClass('ls-mt-correct-border');if(quesstion_data[i].filled==0&&answered_user!=1){var successfull=1;if(filled_success==0||filled_success==""){filled_success='100';filled_success_text="0.00";}else{filled_success=filled_success;filled_success_text=filled_success;}jQuery(".answer-id-"+quesstion_data[i].ans_id+" .precentage").text(filled_success_text+'%');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").css('width',filled_success+'%');}else if(quesstion_data[i].filled!=0&&answered_user!=1){successfull=0;var correct_ans=quesstion_data[i].ans_id;var filled_success=((total_answered_correct*100)/total_question).toFixed(2);jQuery(".answer-id-"+quesstion_data[i].ans_id+" .precentage").text(filled_success+'%');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").css('width',filled_success+'%');answered_user=1;}}else if(quesstion_data[i].correct_ans==0&&answered_user_wrong!=1&&answerid==quesstion_data[i].ans_id){if(answerid==quesstion_data[i].ans_id&&answerid!="skipped"){total_answered_wrong=parseInt(parseInt(quesstion_data[i].total_answered_by_users)+parseInt(1));}else{total_answered_wrong=parseInt(parseInt(quesstion_data[i].total_answered_by_users));}jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").addClass('ls-bg-danger');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .answer").addClass('ls-mt-wrong-border');var filled_danger=((total_answered_wrong*100)/total_question).toFixed(2);jQuery(".answer-id-"+answerid+" .progress-bar").css('width',filled_danger+'%');jQuery(".answer-id-"+answerid+" .precentage").text(filled_danger+'%');answered_user_wrong=1;jQuery(".question-main.question_id_box_"+questionid+" .help-links-div").addClass('ls-mt-wrong-bottom');}if(quesstion_data[i].ans_id!=answerid&&quesstion_data[i].correct_ans!=1){total_answered_default=parseInt(parseInt(quesstion_data[i].total_answered_by_users));jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").addClass('ls-bg-gray');var filled_default=((total_answered_default*100)/total_question).toFixed(2);jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").css('width',filled_default+'%');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .precentage").text(filled_default+'%');}jQuery("input[name='total_answered_by_user']").val(parseInt(total_answered_by_user)+parseInt(1));jQuery(".completed_qst").html(parseInt(total_answered_by_user)+parseInt(1));jQuery("input[name='avgtime']").val(new_avg_time);jQuery(".completed_qst").addClass("blinkgreenfadein");jQuery(".completed_qst").removeClass("blinkgreenfadeout");setTimeout(function(){jQuery(".completed_qst").removeClass("blinkgreenfadein");jQuery(".completed_qst").addClass("blinkgreenfadeout");},1000);jQuery(".avg-time").html(pad(hours,2)+":"+pad(minutes,2)+":"+pad(seconds,2));total_answered_correct="";total_answered_wrong="";total_answered_default="";filled_danger="";filled_success="";filled_default="";total_question="";filled_success_text="";if(parseInt(parseInt(total_answered_by_user)+1)==jQuery("input[name='totalquestions']").val()){jQuery("input[name='submit_quiz']").click();jQuery("input[name='submit_quiz']").prop("disabled",true);jQuery("input[name='submit_quiz']").addClass("submit-button-disabled");jQuery("input[name='submit_quiz']").val("Submitted");}}});jQuery(".loading").css("display","none");}});jQuery.APP.stopTimer(questionid);});jQuery(".help-links-ul").on("click",".reportquestionbtn",function(){jQuery(".ls-message-report").slideUp();jQuery(".ls-message-report").html("");jQuery(".model-title").html("");jQuery(".loading").css("display","block");var qstid=jQuery(this).data("qstid");var quizid=jQuery(this).data("quizid");jQuery(".ls-message-report").html("");jQuery(".report-div").css("display","block");jQuery(".questionbody input[name='quiz_id']").val(quizid);jQuery(".questionbody input[name='question_id']").val(qstid);jQuery(".model-title").html("Report");jQuery(".loading").css("display","none");jQuery(".reportquestion").css("display","block");});jQuery(".reportquestion").on("click",".qstclose",function(){jQuery(".reportquestion").css("display","none");});jQuery(".reportquestion").on("click","input[name='report']",function(){if(jQuery(this).attr('class')=='other'){jQuery('.report-other').slideDown();}else{jQuery('.report-other').slideUp();}});jQuery(".reportquestion").on("click","input[name='report-submit']",function(){var quiz_id=jQuery(".reportquestion input[name='quiz_id']").val();var question_id=jQuery(".reportquestion input[name='question_id']").val();var report=jQuery(".reportquestion input[name='report']:checked").val();if(report=="Others"){var report_message=jQuery(".reportquestion textarea[name='report-other']").val();}else{var report_message=jQuery(".reportquestion input[name='report']:checked").val();}jQuery(".loading").css("display","block");jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"save_report_data","quiz_id":quiz_id,"report":report_message,"question_id":question_id},success:function(response){if(response==1){jQuery(".ls-message-report").html("<p class='ls-success'>Submitted Successfully!</p>");jQuery(".ls-message-report").slideDown();jQuery(".report-div").css("display","none");}else{jQuery(".ls-message-report").html("<p class='ls-fail'>Facing some issue! Please try again!</p>");jQuery(".ls-message-report").slideDown();}jQuery(".loading").css("display","none");}});});jQuery(".quizmain").on('click','.user-explanation',function(e){e.preventDefault();jQuery("#snackbar-msg").html("");var qstid=jQuery(this).attr('data-qstid')
var message=jQuery("#user"+qstid+" textarea[name='user_explanation']").val();if(jQuery.trim(message)!=""){var fd=new FormData();var file=jQuery(document).find('input[type="file"]');var caption=jQuery('.image-upload').find('input[name="file-input"]');var individual_file=file[0].files[0];fd.append("explanationimage",individual_file);var individual_capt=caption.val();fd.append("caption",individual_capt);fd.append('action','save_user_explanation');fd.append('qstid',jQuery(this).attr('data-qstid'));fd.append('quizid',jQuery(this).attr('data-quizid'));fd.append('user_explanation',jQuery("#user"+qstid+" textarea[name='user_explanation']").val());if(jQuery('.image-upload input[name="file-input"]').val()){var filename=file[0].files[0].name;var get_ext=filename.split('.');get_ext=get_ext.reverse();}var exts=['jpeg','jpg','png'];if(filename){if(jQuery.inArray(get_ext[0].toLowerCase(),exts)>-1){var can_go=true;}else{var can_go=false;}}else{var can_go=true;}if(can_go==true){jQuery.ajax({type:'POST',url:ajax_front_obj.admin_ajax_frontend,data:fd,contentType:false,processData:false,success:function(response){var data=jQuery.parseJSON(response);var comment="<div class='explanation-div'> ";if(data.status==1){var full=' style="width:100%;"';var uploaded_image='';if(data.image_url){uploaded_image='<a href="'+data.image_url+'" target="_blank" class="explanation-image-view"><img src="'+data.image_url+'"></a>	';}var explanation=jQuery("#user"+qstid+" textarea[name='user_explanation']").val();comment+='<div class="explained-view"  '+full+'>	<div class="col-md-1 col-sm-2 col-xs-4"><div class="profile-image-div-explanation" style="background:url('+data.profile_image+')"><a href="'+data.profile_url+'" target="_blank" title="'+data.profile_name+'"></a></div></div><div class="col-md-11 col-sm-10 col-xs-8 ls-explanation-p"><p>'+uploaded_image+explanation+'<p>	</div></div>';comment+='<div class="like-div">'+data.vote_data+'</div>';comment+="</div> ";jQuery(".tab-contentuser"+qstid+" .user-explanation-div").prepend(comment);jQuery("#user"+qstid+" textarea[name='user_explanation']").val("");jQuery(file).val("");if(data.image_url){jQuery("#user"+qstid+" .previewimage").attr('src',data.placeholder);}}else{alert("File already exist! Please rename and upload again.");}}});}else{alert('Invalid file!');}}else{jQuery("#snackbar-msg").html("<span style='color:red;'>Please fill the explanation!</span>");toast_mtouch();}});jQuery(".like-div").on("click",".onclicklike",function(){var explnid=jQuery(this).data("explnid");var qstid=jQuery(this).data("qstid");var likeaction=jQuery(this).data("likeaction");if(likeaction=="dislike"){jQuery(this).addClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-liked").addClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-like").removeClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-like").addClass("onclicklike");jQuery(".explanation_"+explnid+" .ls-dislike").addClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-disliked").removeClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-disliked").addClass("disliked");var dislike_count=jQuery(".explanation_"+explnid+" .downvote-p .vote_value").text();var like_count=jQuery(".explanation_"+explnid+" .upvote-p .vote_value").text();if(like_count>0){jQuery(".explanation_"+explnid+" .upvote-p .vote_value").text(parseInt(parseInt(like_count)-parseInt(1)));}jQuery(".explanation_"+explnid+" .downvote-p .vote_value").text(parseInt(parseInt(dislike_count)+parseInt(1)));}else{jQuery(this).addClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-liked").removeClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-like").addClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-dislike").addClass("onclicklike");jQuery(".explanation_"+explnid+" .ls-dislike").removeClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-disliked").addClass("ls-hide");jQuery(".explanation_"+explnid+" .ls-liked").addClass("liked");var dislike_count=jQuery(".explanation_"+explnid+" .downvote-p .vote_value").text();var like_count=jQuery(".explanation_"+explnid+" .upvote-p .vote_value").text();if(dislike_count>0){jQuery(".explanation_"+explnid+" .downvote-p .vote_value").text(parseInt(parseInt(dislike_count)-parseInt(1)));}jQuery(".explanation_"+explnid+" .upvote-p .vote_value").text(parseInt(parseInt(like_count)+parseInt(1)));}if(jQuery(this).hasClass("liked")||jQuery(this).hasClass("disliked")){}else{jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"save_like","explnid":explnid,"qstid":qstid,"likeaction":likeaction},success:function(response){if(response==1&&likeaction=="dislike"){}else if(response==1&&likeaction=="like"){}}});}});});jQuery(document).ready(function(){jQuery("ul.quiz-tabs").on("click","li",function(){var tab_id=jQuery(this).attr('data-tab');var mainid=jQuery(this).attr('data-mainid');var atLeastOneIsChecked=jQuery('.answersdivquestion'+mainid+' .answerul-div .answerul .radiobutton:checked').length>0;if(atLeastOneIsChecked){jQuery("#prep"+mainid).removeAttr("style");}jQuery(".quiz-tabs"+mainid+" li").removeClass('current');jQuery('.tab-content'+mainid+' .tab-content').removeClass('current');jQuery(this).addClass('current');jQuery('.tab-content'+mainid+' .tab-content'+tab_id).addClass('current');});});function readURL(input){if(input.files&&input.files[0]){var reader=new FileReader();reader.onload=function(e){var file=e.target.result;var mime=file.match(/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/);if(mime&&mime.length){result=mime[1];}var exts=['image/jpeg','image/jpg','image/png'];if(mime){if(jQuery.inArray(result,exts)>-1){jQuery('.previewimage').attr('src',e.target.result);}else{alert('Invalid file!');}}}
reader.readAsDataURL(input.files[0]);}}jQuery(document).ready(function(){jQuery('.reportmaindiv').on('click','.lsclosebutton',function(){jQuery(".resultdiv").toggle();if(jQuery(".lsclosebutton i").hasClass("fa-window-close")){jQuery(".lsclosebutton i").removeClass("fa-window-close");jQuery(".lsclosebutton i").addClass("fa-plus-circle");}else{jQuery(".lsclosebutton i").addClass("fa-window-close");jQuery(".lsclosebutton i").removeClass("fa-plus-circle");}});jQuery(".quizform").on("click","input[name='submit_quiz']",function(e){e.preventDefault();jQuery("#snackbar-msg").html("");var totalquestions=jQuery(".quizform input[name='totalquestions']").val();var quiz_group_id=jQuery(".quizform input[name='quiz_group_id']").val();var section_id=jQuery(".quizform input[name='section_id']").val();var topic_id=jQuery(".quizform input[name='topic_id']").val();var quiz_id=jQuery(".quizform input[name='quiz_id']").val();var quiz_type=jQuery(".quizform input[name='quiz_type']").val();var correctans=jQuery(".quizform input[name='correctans']").val();var quiz_id=jQuery(".quizform input[name='quiz_id']").val();var question_id=jQuery(".quizform input[name='question_id[]']").map(function(){return jQuery(this).val();}).get();var n=jQuery(".anslabel:checked").length;var ques_ans_array=[];for(i=0;i<n;i++){ques_ans=jQuery("input[name^='ques_ans["+i+"]']:checked").val();ques_ans_array.push(ques_ans);}jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"save_quiz_data_ajax","totalquestions":totalquestions,"quiz_group_id":quiz_group_id,"section_id":section_id,"topic_id":topic_id,"question_id":question_id,"ques_ans":ques_ans_array,"correctans":correctans,"quiz_type":quiz_type,"quiz_id":quiz_id},success:function(response){console.log(response);if(response==1){jQuery("#snackbar-msg").html("Saved Successfully!");}else if(response==2){jQuery("#snackbar-msg").html("<span style='color:red;'>Already Submitted Quiz!</span>");}else if(response==3){jQuery("#snackbar-msg").html("<span style='color:red;'>Please attempt complete quiz!</span>");}else if(response==4){jQuery("#snackbar-msg").html("<span style='color:red;'>Please Login/Signup to submit quiz!</span>");}toast_mtouch();}});});jQuery(".timer-div-main").on("click",".start_timer",function(e){var id=jQuery(this).data('id');var minutesLabel=document.getElementById("minutes"+id);var secondsLabel=document.getElementById("seconds"+id);var totalSeconds=0;timer_var=setInterval(function(){++totalSeconds;secondsLabel.innerHTML=pad(totalSeconds%60);minutesLabel.innerHTML=pad(parseInt(totalSeconds/60));},1000);});});function pad(val){var valString=val+"";if(valString.length<2){return"0"+valString;}else{return valString;}}jQuery(document).ready(function(){(function(jQuery){jQuery.extend({APP:{formatTimer:function(a){if(a<10){a='0'+a;}return a;},startTimer:function(dir,id,qstid){var a;jQuery.APP.dir=dir;jQuery.APP.d1=new Date();switch(jQuery.APP.state){case'pause':jQuery.APP.t1=jQuery.APP.d1.getTime()-jQuery.APP.td;break;default:jQuery.APP.t1=jQuery.APP.d1.getTime();if(jQuery.APP.dir==='cd'){jQuery.APP.t1+=parseInt(jQuery('.cd_seconds').val())*1000;}break;}jQuery.APP.state='alive';jQuery('.'+jQuery.APP.dir+'_status').html('Running');jQuery.APP.loopTimer(id,qstid);},pauseTimer:function(){jQuery.APP.dp=new Date();jQuery.APP.tp=jQuery.APP.dp.getTime();jQuery.APP.td=jQuery.APP.tp-jQuery.APP.t1;jQuery('.'+jQuery.APP.dir+'_start').val('Resume');jQuery.APP.state='pause';jQuery('.'+jQuery.APP.dir+'_status').html('Paused');},stopTimer:function(id){jQuery('.'+jQuery.APP.dir+'_start').val('Restart');jQuery.APP.state='stop';jQuery('.'+jQuery.APP.dir+'_status').html('Stopped');},resetTimer:function(){jQuery('.'+jQuery.APP.dir+'_ms,.'+jQuery.APP.dir+'_s,.'+jQuery.APP.dir+'_m,.'+jQuery.APP.dir+'_h_'+id).html('00');jQuery('.'+jQuery.APP.dir+'_start').val('Start');jQuery.APP.state='reset';jQuery('.'+jQuery.APP.dir+'_status').html('Reset & Idle again');},endTimer:function(callback){jQuery('#'+jQuery.APP.dir+'_start').val('Restart');jQuery.APP.state='end';if(typeof callback==='function'){callback();}},loopTimer:function(id,qstid){var td;var d2,t2;var ms=0;var s=0;var m=0;var h=0;if(jQuery.APP.state==='alive'){d2=new Date();t2=d2.getTime();if(jQuery.APP.dir==='sw'){td=t2-jQuery.APP.t1;}else{td=jQuery.APP.t1-t2;if(td<=0){jQuery.APP.endTimer(function(){jQuery.APP.resetTimer();jQuery('.'+jQuery.APP.dir+'_status').html('Ended & Reset');});}}ms=td%1000;if(ms<1){ms=0;}else{s=(td-ms)/1000;if(s<1){s=0;}else{var m=(s-(s%60))/60;if(m<1){m=0;}else{var h=(m-(m%60))/60;if(h<1){h=0;}}}}ms=Math.round(ms/100);s=s-(m*60);m=m-(h*60);jQuery('.'+jQuery.APP.dir+'_s_'+id).html(jQuery.APP.formatTimer(s));jQuery('.'+jQuery.APP.dir+'_m_'+id).html(jQuery.APP.formatTimer(m));jQuery('.'+jQuery.APP.dir+'_h_'+id).html(jQuery.APP.formatTimer(h));if(jQuery.APP.formatTimer(m)==10){jQuery.APP.stopTimer(id);jQuery(".notattempted-blur"+qstid+" .skip_button.anslabel").click();}jQuery.APP.t=setTimeout(jQuery.APP.loopTimer.bind(null,id,qstid),1);}else{clearTimeout(jQuery.APP.t);return true;}}}});jQuery(document).on("click",".sw_start",function(){var id=jQuery(this).data('id');jQuery.APP.startTimer('sw',id,qstid);});jQuery(document).on("click","#cd_start",function(){jQuery.APP.startTimer('cd');});jQuery(document).on("click",".sw_stop",function(){var id=jQuery(this).data('id');jQuery.APP.stopTimer(id);});jQuery(document).on("click","#sw_reset,#cd_reset",function(){jQuery.APP.resetTimer();});jQuery(document).on("click","#sw_pause,#cd_pause",function(){jQuery.APP.pauseTimer();});})(jQuery);});jQuery(document).ready(function(){jQuery('.addquestion').on('click',function(){var qstid=jQuery(this).data("qstid");var quizid=jQuery(this).data("quizid");var answer_mode=jQuery(this).data("answer_mode");var question_count=jQuery(this).data("question_count");var qst=0;var access_next_question;jQuery('input[name="active_question['+question_count+']"]').val("active")
jQuery('input[name^="active_question"]').each(function(){qst=parseInt(parseInt(qst)+1);if(jQuery(this).val()=='active'){if(jQuery(this).data("activeid")!="active_"+question_count){access_next_question=false;return false;}}});if(access_next_question!=false){jQuery.APP.startTimer('sw',question_count,qstid);jQuery(".overlay"+qstid).remove();jQuery(".notattempted-blur"+qstid).removeClass("notattempted-blur");}else{alert("Please Finish previous Question first.");}});});function toast_mtouch(){var x=document.getElementById("snackbar");x.className="show";setTimeout(function(){x.className=x.className.replace("show","");},3000);}jQuery(document).ready(function(){jQuery(document).on("click",".generate_question_graph",function(){var qstid=jQuery(this).data("qstid");var quiz_id=jQuery(this).data("quiz_id");if(jQuery(this).hasClass("generate_graph")){jQuery(this).prop("disabled",true);jQuery(this).removeClass("generate_graph");jQuery(".question_id_box_"+qstid+" .loading").css("display","block");jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"get_graph_data","question_id":qstid,"quiz_id":quiz_id,},success:function(response){console.log(response);jQuery(".question_id_box_"+qstid+" .loading").css("display","none");var chartdata=jQuery.parseJSON(response);if(chartdata.current_user_graph_users==0){jQuery(".question_id_box_"+qstid+" .l4-analytics-graph-div").prepend("<div class='text-center f-20'>Since you have answered Wrong/Skipped,so no data will be generated</div>");}jQuery(".question_id_box_"+qstid+" .loading").css("display","none");var config={type:'line',data:{labels:chartdata.complete_graph_time,datasets:[{label:'Data Point',data:chartdata.last_user_count,pointRadius:[0],borderWidth:1,fill:false,borderColor:'#a4a4a4',},{type:'line',label:chartdata.before_you,backgroundColor:'#F3B3B1',data:chartdata.current_user_graph_users,pointBackgroundColor:'#F3B3B1',pointBorderColor:'#a4a4a4',pointBorderWidth:3,borderWidth:3,fill:true,},{label:chartdata.after_you,backgroundColor:'#9DE5D7',pointBackgroundColor:'#FFED00',pointBorderColor:'#FFED00',pointBorderWidth:3,borderWidth:3,data:chartdata.complete_graph_users,fill:true,},]},options:{responsive:true,title:{display:true,text:''},tooltips:{mode:'index',intersect:false,callbacks:{title:function(tooltipItems,data){return tooltipItems[0].xLabel+' (Time in seconds)';},label:function(tooltipItems,data){if(data.datasets[tooltipItems.datasetIndex].label!='Data Point'){return data.datasets[tooltipItems.datasetIndex].label+': '+tooltipItems.yLabel;}}}},hover:{mode:'nearest',intersect:true},legend:{labels:{filter:function(item,chart){return!item.text.includes('Data Point');},fontSize:15,},},scales:{xAxes:[{display:true,scaleLabel:{display:true,labelString:'Time (Seconds)',},gridLines:{display:false,},ticks:{autoSkip:true,maxTicksLimit:20}}],yAxes:[{display:true,scaleLabel:{display:true,labelString:'Users'},gridLines:{display:false,},ticks:{autoSkip:true,maxTicksLimit:5}}]},}};var ctx=document.getElementById('performance_line_chart_q_'+qstid).getContext('2d');window.myLine=new Chart(ctx,config);}});}});});function isScrolledIntoView(elem){var $elem=$(elem);var $window=$(window);var docViewTop=$window.scrollTop();var docViewBottom=docViewTop+$window.height();var elemTop=$elem.offset().top;var elemBottom=elemTop+$elem.height();return((elemBottom<=docViewBottom)&&(elemTop>=docViewTop));}jQuery(document).ready(function(){jQuery('.exp_hide_show').on('click',function(){var expStatus=jQuery(this).attr('aria-expanded');if(expStatus=="true"){jQuery(this).html('Show Explanation <i class="fas fa-chevron-down" style="font-size: 10px; "></i>');}else{jQuery(this).html('Hide Explanation <i class="fas fa-chevron-up" style="font-size: 10px; "></i>');}});});