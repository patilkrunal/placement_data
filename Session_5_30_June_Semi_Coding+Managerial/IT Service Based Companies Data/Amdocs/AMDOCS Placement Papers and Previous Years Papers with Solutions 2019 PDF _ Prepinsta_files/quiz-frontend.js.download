jQuery(document).ready(function(){jQuery(document).on("click",".dash-anslabel",function(){jQuery("#snackbar-msg").html("");var questionid=jQuery(this).data("questionid");var answerid=jQuery(this).data("answerid");var quizid=jQuery(this).data("quizid");var total_answered_by_user=jQuery("input[name='total_answered_by_user']").val();jQuery(".question_id_box_"+questionid+" .loading").css('display','block');jQuery(".answersdivquestion"+questionid+" input[type='radio']").attr("disabled",true);jQuery(".question_id_box_"+questionid+" .anslabel").attr("disabled",true);jQuery(this).attr("checked",true);jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"dashboard_save_selected_ans_data","quizid":quizid,"questionid":questionid,"answerid":answerid,},success:function(response){if(response==1){jQuery(".question_id_box_"+questionid+" .dash-generate_question_graph").css("display","block");question_progressbar(quizid,questionid,answerid,total_answered_by_user);}else if(response==2){jQuery(".question_id_box_"+questionid+" .dash-analytics-main").css("display","block");question_progressbar(quizid,questionid,answerid,total_answered_by_user);}else{question_progressbar(quizid,questionid,answerid,total_answered_by_user);}jQuery(".dash-loading").css("display","none");}});});jQuery(".dash-help-links-ul").on("click",".reportquestionbtn",function(){jQuery(".dash-ls-message-report").slideUp();jQuery(".dash-ls-message-report").html("");jQuery(".dash-model-title").html("");jQuery(".dash-modal-content .loading").css("display","block");var qstid=jQuery(this).data("qstid");var quizid=jQuery(this).data("quizid");jQuery(".dash-ls-message-report").html("");jQuery(".dash-report-div").css("display","block");jQuery(".dash-questionbody input[name='quiz_id']").val(quizid);jQuery(".dash-questionbody input[name='question_id']").val(qstid);jQuery(".dash-model-title").html("Report");jQuery(".dash-modal-content .loading").css("display","none");jQuery(".dash-reportquestion").css("display","block");});jQuery(".dash-reportquestion").on("click",".dash-qstclose",function(){jQuery(".dash-reportquestion").css("display","none");});jQuery(".dash-reportquestion").on("click","input[name='report']",function(){if(jQuery(this).attr('class')=='other'){jQuery('.dash-report-other').slideDown();}else{jQuery('.dash-report-other').slideUp();}});jQuery(".dash-reportquestion").on("click","input[name='report-submit']",function(){var quiz_id=jQuery(".dash-reportquestion input[name='quiz_id']").val();var question_id=jQuery(".dash-reportquestion input[name='question_id']").val();var report=jQuery(".dash-reportquestion input[name='report']:checked").val();if(report=="Others"){var report_message=jQuery(".dash-reportquestion textarea[name='report-other']").val();}else{var report_message=jQuery(".dash-reportquestion input[name='report']:checked").val();}jQuery(".dash-modal-content .loading").css("display","block");jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"save_dashboard_report_data","quiz_id":quiz_id,"report":report_message,"question_id":question_id},success:function(response){if(response==1){jQuery(".dash-ls-message-report").html("<p class='dash-ls-success'>Submitted Successfully!</p>");jQuery(".dash-ls-message-report").slideDown();jQuery(".dash-report-div").css("display","none");jQuery("input[name='report-submit']").css("display","none");}else{jQuery(".dash-ls-message-report").html("<p class='dash-ls-fail'>Facing some issue! Please try again!</p>");jQuery(".dash-ls-message-report").slideDown();}jQuery(".dash-modal-content .loading").css("display","none");}});});jQuery(".dash-question-main").on("click",".show-explanation-toggle",function(){var qstid=jQuery(this).data("qstid");var current_text=jQuery(".question_id_box_"+qstid+" .text-expl").text();if(current_text==="Show Explanation"){var new_text="Hide Explanation";jQuery(".question_id_box_"+qstid+" .text-expl").text(new_text);jQuery(".question_id_box_"+qstid+" .fas").addClass("fa-chevron-up");jQuery(".question_id_box_"+qstid+" .fas").removeClass("fa-chevron-down");}else{var new_text="Show Explanation";jQuery(".question_id_box_"+qstid+" .text-expl").text(new_text);jQuery(".question_id_box_"+qstid+" .fas").addClass("fa-chevron-down");jQuery(".question_id_box_"+qstid+" .fas").removeClass("fa-chevron-up");}});});function toast_mtouch(){var x=document.getElementById("snackbar");x.className="show";setTimeout(function(){x.className=x.className.replace("show","");},3000);}function question_progressbar(quizid,questionid,answerid,total_answered_by_user){jQuery.ajax({type:"POST",url:ajax_front_obj.admin_ajax_frontend,data:{"action":"dashboard_check_correct_ans","quizid":quizid,"questionid":questionid,"answerid":answerid},success:function(response){jQuery(".answersdivquestion"+questionid+" .dash-answer-title-progress").css("display","block");var quizdata=JSON.parse(response);var quesstion_data=quizdata[quizid][questionid];var successfull="";var successfull_ans_id="";var total_question="";var total_answered_correct="";var total_answered_wrong="";var total_answered_default="";var filled_danger="";var filled_success="";var filled_default="";var answered_user="";var answered_user_wrong="";var filled_success_text="";jQuery(".question_id_box_"+questionid+" .loading").css('display','none');for(var i=0;i<quesstion_data.length;i++){var success="";total_question=parseInt(parseInt(quesstion_data[i].total_answered));if(quesstion_data[i].user_id!=0){total_question=parseInt(parseInt(quesstion_data[i].total_answered));}else if(total_question!=0){total_question=total_question+1;}if(quesstion_data[i].correct_ans==1){total_answered_correct=parseInt(parseInt(quesstion_data[i].total_answered_by_users));jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").addClass('ls-dash-bg-success');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .dash-answer").addClass('ls-correct-border');if(answerid==quesstion_data[i].ans_id){if(quesstion_data[i].user_id!=0){total_answered_correct=total_answered_correct;}else if(total_question!=0){total_answered_correct=total_answered_correct+1;}var filled_success=((total_answered_correct*100)/total_question).toFixed(2);var successfull=1;if(filled_success==0||filled_success==""||isNaN(filled_success)){filled_success='100.00';filled_success_text="0.00";}else{filled_success=filled_success;filled_success_text=filled_success;}jQuery(".answer-id-"+quesstion_data[i].ans_id+" .dash-precentage").text(filled_success+'%');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").css('width',filled_success+'%');jQuery(".dash-question-main.question_id_box_"+questionid+" .dash-help-links-div").addClass('ls-correct-bottom');}else{var filled_success=((total_answered_correct*100)/total_question).toFixed(2);successfull=0;var correct_ans=quesstion_data[i].ans_id;var filled_success=((total_answered_correct*100)/total_question).toFixed(2);if(filled_success==0||filled_success==""||isNaN(filled_success)){filled_success='100.00';filled_success_text="0.00";}else{filled_success=filled_success;filled_success_text=filled_success;}jQuery(".answer-id-"+quesstion_data[i].ans_id+" .dash-precentage").text(filled_success_text+'%');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").css('width',filled_success+'%');answered_user=1;}}else if(quesstion_data[i].correct_ans==0&&answered_user_wrong!=1&&answerid==quesstion_data[i].ans_id){total_answered_wrong=parseInt(parseInt(quesstion_data[i].total_answered_by_users));if(quesstion_data[i].user_id!=0){total_answered_wrong=parseInt(parseInt(quesstion_data[i].total_answered_by_users));}else if(total_question!=0){total_answered_wrong=total_answered_wrong+1;}jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").addClass('ls-dash-bg-danger');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .dash-answer").addClass('ls-wrong-border');var filled_danger=((total_answered_wrong*100)/total_question).toFixed(2);if(filled_danger==0||filled_danger==""||isNaN(filled_danger)){filled_danger='100.00';filled_danger_text="0.00";}else{filled_danger=filled_danger;filled_danger_text=filled_danger;}jQuery(".answer-id-"+answerid+" .progress-bar").css('width',filled_danger+'%');jQuery(".answer-id-"+answerid+" .dash-precentage").text(filled_danger+'%');answered_user_wrong=1;jQuery(".dash-question-main.question_id_box_"+questionid+" .dash-help-links-div").addClass('ls-wrong-bottom');}if(quesstion_data[i].ans_id!=answerid&&quesstion_data[i].correct_ans!=1){total_answered_default=parseInt(parseInt(quesstion_data[i].total_answered_by_users));jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").addClass('ls-dash-bg-gray');var filled_default=((total_answered_default*100)/total_question).toFixed(2);if(filled_default==0||filled_default==""||isNaN(filled_default)){filled_default='0.00';filled_default_text="0.00";}else{filled_default=filled_default;filled_default_text=filled_default;}jQuery(".answer-id-"+quesstion_data[i].ans_id+" .progress-bar").css('width',filled_default+'%');jQuery(".answer-id-"+quesstion_data[i].ans_id+" .dash-precentage").text(filled_default+'%');}jQuery(".answersdivquestion"+questionid+" .dash-ls-progress-bar .progress-bar").removeClass('dash-displaynone');jQuery(".answersdivquestion"+questionid+" .dash-ls-progress-bar .progress-bar").addClass('dash-displayblock');jQuery(".answersdivquestion"+questionid+" .dash-ls-progress-bar .dash-answer-title-progress").removeClass('dash-displaynone');jQuery(".answersdivquestion"+questionid+" .dash-ls-progress-bar .dash-answer-title-progress").addClass('dash-displayblock');jQuery(".answersdivquestion"+questionid+" .dash-ls-progress-bar .dash-precentage").removeClass('dash-displaynone');jQuery(".answersdivquestion"+questionid+" .dash-ls-progress-bar .dash-precentage").addClass('dash-displayblock');jQuery(".answersdivquestion"+questionid+" .dash-ls-ans-title").removeClass('dash-displayblock');jQuery(".answersdivquestion"+questionid+" .dash-ls-ans-title").addClass('dash-displaynone');jQuery("input[name='total_answered_by_user']").val(parseInt(total_answered_by_user)+parseInt(1));jQuery(".completed_qst").html(parseInt(total_answered_by_user)+parseInt(1));total_answered_correct="";total_answered_wrong="";total_answered_default="";filled_danger="";filled_success="";filled_default="";total_question="";filled_success_text="";}jQuery(".dash-loading").css("display","none");}});}